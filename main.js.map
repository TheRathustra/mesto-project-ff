{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex_praktikum/./src/scripts/components/modal.js","webpack://yandex_praktikum/./src/scripts/components/cards.js","webpack://yandex_praktikum/./src/scripts/components/initialData.js","webpack://yandex_praktikum/./src/scripts/components/validation.js","webpack://yandex_praktikum/./src/scripts/components/api.js","webpack://yandex_praktikum/./src/scripts/index.js"],"sourcesContent":["function openModal(popup) {\r\n  openPopup(popup);\r\n  //Повесим на весь документ для нажатия клавиши Esc\r\n  document.addEventListener(\"keydown\", closeModal);\r\n}\r\n\r\nfunction closeModal(event, popup, close = false) {\r\n  if (!popup && event.key === \"Escape\") {\r\n    popup = document.querySelector(\".popup_is-opened\");\r\n  }\r\n\r\n  if (!popup) {\r\n    return false;\r\n  }\r\n\r\n  const popupCloseButton = popup.querySelector(\".popup__close\");\r\n  if (\r\n    event.key === \"Escape\" ||\r\n    event.target === popupCloseButton ||\r\n    !event.target.closest(\".popup__content\") ||\r\n    close\r\n  ) {\r\n    closePopup(popup);\r\n    document.removeEventListener(\"keydown\", closeModal);\r\n\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction openPopup(popup) {\r\n  popup.classList.add(\"popup_is-opened\");\r\n}\r\n\r\nfunction closePopup(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n}\r\n\r\nexport { openModal, closeModal };\r\n","const cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nfunction createCard(cardData, clickFunctions, cardAPI, profileId) {\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true);\r\n\r\n  adjustDeleteAction(\r\n    cardElement,\r\n    cardData,\r\n    clickFunctions.trash,\r\n    cardAPI.deleteCard,\r\n    profileId\r\n  );\r\n  adjustCardImage(cardElement, cardData, clickFunctions.card);\r\n  adjustLikeAction(\r\n    cardElement,\r\n    cardData,\r\n    clickFunctions.like,\r\n    cardAPI.likeCard,\r\n    profileId\r\n  );\r\n\r\n  return cardElement;\r\n}\r\n\r\nfunction adjustDeleteAction(\r\n  cardElement,\r\n  cardData,\r\n  trashCallback,\r\n  deleteCardAPI,\r\n  profileId\r\n) {\r\n  const deleteBtn = cardElement.querySelector(\".card__delete-button\");\r\n\r\n  if (profileId === cardData.owner._id) {\r\n    deleteBtn.addEventListener(\"click\", (event) => {\r\n      trashCallback(event, cardData, deleteCardAPI);\r\n    });\r\n  } else {\r\n    deleteBtn.classList.add(\"card__delete-button_hidden\");\r\n  }\r\n}\r\n\r\nfunction adjustCardImage(cardElement, cardData, onClickCallback) {\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  cardImage.setAttribute(\"src\", cardData.link);\r\n  cardImage.setAttribute(\"alt\", cardData.name);\r\n  cardElement.querySelector(\".card__title\").textContent = cardData.name;\r\n\r\n  cardImage.addEventListener(\"click\", () => {\r\n    onClickCallback(cardData.name, cardData.link);\r\n  });\r\n}\r\n\r\nfunction adjustLikeAction(\r\n  cardElement,\r\n  cardData,\r\n  callbackOnLike,\r\n  saveLikeCard,\r\n  profileId\r\n) {\r\n  const likeElement = cardElement.querySelector(\".card__like\");\r\n\r\n  const likeBtn = likeElement.querySelector(\".card__like-button\");\r\n  likeBtn.addEventListener(\"click\", (event) => {\r\n    callbackOnLike(event, cardData, saveLikeCard);\r\n  });\r\n\r\n  const likeNumber = likeElement.querySelector(\".card__like-number\");\r\n  likeNumber.textContent = cardData.likes.length;\r\n\r\n  cardData.likes.forEach((like) => {\r\n    if (profileId === like._id) {\r\n      likeBtn.classList.toggle(\"card__like-button_is-active\");\r\n    }\r\n  });\r\n}\r\n\r\nfunction deleteCard(event, cardData, deleteCardAPI) {\r\n  deleteCardAPI(cardData._id)\r\n    .then(() => {\r\n      let card = event.target.closest(\".card\");\r\n      card.parentElement.removeChild(card);\r\n    })\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nfunction сlickOnLike(event, card, saveLikeCard) {\r\n  saveLikeCard(\r\n    card._id,\r\n    !event.target.classList.contains(\"card__like-button_is-active\")\r\n  )\r\n    .then((result) => {\r\n      event.target.classList.toggle(\"card__like-button_is-active\");\r\n      const likeElement = event.target.closest(\".card__like\");\r\n      const likeNumber = likeElement.querySelector(\".card__like-number\");\r\n      likeNumber.textContent = result.likes.length;\r\n    })\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nexport { createCard, deleteCard, сlickOnLike };\r\n","export const initialCards = [\r\n  {\r\n    name: \"Архыз\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg\",\r\n  },\r\n  {\r\n    name: \"Челябинская область\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg\",\r\n  },\r\n  {\r\n    name: \"Иваново\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg\",\r\n  },\r\n  {\r\n    name: \"Камчатка\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg\",\r\n  },\r\n  {\r\n    name: \"Холмогорский район\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg\",\r\n  },\r\n  {\r\n    name: \"Байкал\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg\",\r\n  }\r\n];\r\n\r\nexport const validationSettings = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};","function showInputError(\r\n  formElement,\r\n  inputElement,\r\n  errorMessage,\r\n  validationSettings\r\n) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n\r\n  inputElement.classList.add(validationSettings.inputErrorClass);\r\n  errorElement.classList.add(validationSettings.errorClass);\r\n  errorElement.textContent = errorMessage;\r\n\r\n  const btn = formElement.querySelector(\r\n    validationSettings.submitButtonSelector\r\n  );\r\n  btn.classList.add(validationSettings.inactiveButtonClass);\r\n}\r\n\r\nfunction hideInputError(formElement, inputElement, validationSettings) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n\r\n  inputElement.classList.remove(validationSettings.inputErrorClass);\r\n  errorElement.classList.remove(validationSettings.errorClass);\r\n  errorElement.textContent = \"\";\r\n\r\n  const btn = formElement.querySelector(\r\n    validationSettings.submitButtonSelector\r\n  );\r\n  btn.classList.remove(validationSettings.inactiveButtonClass);\r\n}\r\n\r\nfunction isValid(formElement, inputElement, validationSettings) {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      validationSettings\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationSettings);\r\n  }\r\n}\r\n\r\nfunction setEventListeners(formElement, validationSettings) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationSettings.inputSelector)\r\n  );\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      isValid(formElement, inputElement, validationSettings);\r\n    });\r\n  });\r\n}\r\n\r\nfunction enableValidation(validationSettings) {\r\n  const formList = Array.from(\r\n    document.querySelectorAll(validationSettings.formSelector)\r\n  );\r\n\r\n  formList.forEach((formElement) => {\r\n    clearValidation(formElement, validationSettings);\r\n    setEventListeners(formElement, validationSettings);\r\n  });\r\n}\r\n\r\nfunction clearValidation(formElement, validationSettings) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationSettings.inputSelector)\r\n  );\r\n\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, validationSettings);\r\n  });\r\n\r\n  const btn = formElement.querySelector(\r\n    validationSettings.submitButtonSelector\r\n  );\r\n  btn.classList.add(validationSettings.inactiveButtonClass);\r\n}\r\n\r\nexport { enableValidation, clearValidation };\r\n","const apiSettings = {\r\n  token: '6181dd13-c179-480c-8203-2aa7bbc59bd3',\r\n  groupdId: 'wff-cohort-18'\r\n}\r\n\r\nconst PATH = `https://nomoreparties.co/v1/${apiSettings.groupdId}/`;\r\nconst headers = ({\r\n  \"Content-Type\": \"application/json\",\r\n  authorization: `${apiSettings.token}`\r\n});\r\n\r\nconst handleResponse = (response) => {\r\n  if (response.ok) {\r\n    return response.json();\r\n  }\r\n\r\n  return Promise.reject(`Ошибка: ${response.status}`);\r\n}\r\n\r\nfunction getProfile() {\r\n  const settings = {\r\n    method: 'GET',\r\n    headers,\r\n  };\r\n  return fetch(PATH + \"users/me\", settings)\r\n    .then(handleResponse); \r\n}\r\n\r\nfunction patchProfile(name, about) {\r\n  const settings = {\r\n    method: 'PATCH',\r\n    headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about\r\n    })\r\n  };\r\n  return fetch(PATH + \"users/me\", settings)\r\n    .then(handleResponse);  \r\n}\r\n\r\nfunction patchAvatar(avatar) {\r\n  const settings = {\r\n    method: 'PATCH',\r\n    headers,\r\n    body: JSON.stringify({\r\n      avatar: avatar\r\n    })\r\n  };\r\n  return fetch(PATH + \"users/me/avatar\", settings)\r\n    .then(handleResponse);  \r\n}\r\n\r\nfunction getCards() {\r\n  const settings = {\r\n    method: 'GET',\r\n    headers,\r\n  };\r\n  return fetch(PATH + \"cards\", settings)\r\n    .then(handleResponse); \r\n}\r\n\r\nfunction postCard(name, link) {\r\n  const settings = {\r\n    method: 'POST',\r\n    headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link\r\n    })\r\n  };\r\n  return fetch(PATH + \"cards\", settings)\r\n    .then(handleResponse); \r\n}\r\n\r\nfunction likeCard(cardId, liked) {\r\n  const settings = {\r\n    method: liked ? 'PUT' : 'DELETE',\r\n    headers\r\n  };\r\n  return fetch(PATH + `cards/likes/${cardId}`, settings)\r\n    .then(handleResponse); \r\n}\r\n\r\nfunction deleteCard(cardId) {\r\n  const settings = {\r\n    method: 'DELETE',\r\n    headers\r\n  };\r\n  return fetch(PATH + `cards/${cardId}`, settings)\r\n    .then(handleResponse); \r\n}\r\n\r\nfunction checkUrl(url) {\r\n  const settings = {\r\n    method: 'HEAD'\r\n  };\r\n  let correctUrl = false;\r\n  fetch(url, settings).then((response) => {\r\n    correctUrl = response.ok;\r\n  }).catch(() => correctUrl = false);\r\n  return correctUrl; \r\n}\r\n\r\nconst makeCrudAPI = () => ({\r\n  getProfile: () => getProfile(),\r\n  patchProfile: (name, about) => patchProfile(name, about),\r\n  patchAvatar: (avatar) => patchAvatar(avatar),\r\n  getCards: () => getCards(),\r\n  addCard: (name, link) => postCard(name, link),\r\n  deleteCard: (cardId) => deleteCard(cardId),\r\n  likeCard: (cardId, liked) => likeCard(cardId, liked),\r\n  checkUrl: (url) => checkUrl(url),\r\n});\r\n\r\nexport const crudAPI = makeCrudAPI(); \r\n","import \"../pages/index.css\";\r\nimport { openModal, closeModal } from \"./components/modal.js\";\r\nimport { createCard, deleteCard, сlickOnLike } from \"./components/cards.js\";\r\nimport { initialCards, validationSettings } from \"./components/initialData.js\";\r\nimport { clearValidation, enableValidation } from \"./components/validation.js\";\r\nimport { crudAPI } from \"./components/api.js\";\r\n\r\nconst placesList = document.querySelector(\".places__list\");\r\nconst content = document.querySelector(\".content\");\r\n\r\nconst editForm = document.querySelector(\".popup_type_edit .popup__form\");\r\nconst addForm = document.querySelector(\".popup_type_new-card  .popup__form\");\r\nconst avatarForm = document.querySelector(\".popup_type_avatar  .popup__form\");\r\n\r\nconst title = content.querySelector(\".profile__title\");\r\nconst description = content.querySelector(\".profile__description\");\r\nconst profileImage = content.querySelector(\".profile__image\");\r\n\r\nconst nameInput = document.querySelector(\".popup__input_type_name\");\r\nconst jobInput = document.querySelector(\".popup__input_type_description\");\r\nconst editButton = document.querySelector(\".profile__edit-button\");\r\nconst addButton = document.querySelector(\".profile__add-button\");\r\nconst avatarButton = document.querySelector(\".profile__avatar-button\");\r\n\r\nconst cardNameInput = document.querySelector(\".popup__input_type_card-name\");\r\nconst urlInput = document.querySelector(\".popup__input_type_url\");\r\nconst avatarInput = document.querySelector(\".popup__input_type_avatar\");\r\n\r\nconst popupTypeNew = document.querySelector(\".popup_type_new-card\");\r\nconst popupTypeEdit = document.querySelector(\".popup_type_edit\");\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupTypeAvatar = document.querySelector(\".popup_type_avatar\");\r\n\r\nconst modalImage = document.querySelector(\".popup__image\");\r\nconst modalCaption = document.querySelector(\".popup__caption\");\r\n\r\nconst spinner = document.querySelector(\".spinner\");\r\n\r\nconst handleError = (err) => {\r\n  console.log(err);\r\n};\r\n\r\nconst clickFunctions = {\r\n  trash: deleteCard,\r\n  like: сlickOnLike,\r\n  card: openImage,\r\n};\r\n\r\nlet profileId = undefined;\r\n\r\naddButton.addEventListener(\"click\", () => {\r\n  clearValidation(addForm, validationSettings);\r\n  openModal(popupTypeNew);\r\n});\r\n\r\neditButton.addEventListener(\"click\", () => {\r\n  nameInput.value = title.textContent;\r\n  jobInput.value = description.textContent;\r\n  clearValidation(editForm, validationSettings);\r\n  openModal(popupTypeEdit);\r\n});\r\n\r\navatarButton.addEventListener(\"click\", () => {\r\n  clearValidation(avatarForm, validationSettings);\r\n  openModal(popupTypeAvatar);\r\n});\r\n\r\nfunction handleNewCardFormSubmit(evt) {\r\n  evt.preventDefault();\r\n  const btn = addForm.querySelector(\".popup__button\");\r\n\r\n  renderLoading(true, btn, \"Сохраняю...\");\r\n\r\n  crudAPI\r\n    .addCard(cardNameInput.value, urlInput.value)\r\n    .then((card) => {\r\n      const newCard = createCard(card, clickFunctions, crudAPI, profileId);\r\n      closeModal(evt, popupTypeNew, true);\r\n      placesList.prepend(newCard);\r\n\r\n      addForm.reset();\r\n      clearValidation(addForm, validationSettings);\r\n    })\r\n    .catch(handleError)\r\n    .finally(renderLoading(false, btn, \"Сохранить\"));\r\n}\r\n\r\nfunction handleEditProfileFormSubmit(evt) {\r\n  evt.preventDefault();\r\n  const btn = editForm.querySelector(\".popup__button\");\r\n\r\n  renderLoading(true, btn, \"Сохраняю...\");\r\n\r\n  crudAPI\r\n    .patchProfile(nameInput.value, jobInput.value)\r\n    .then((profileData) => {\r\n      updateProfile(profileData);\r\n      closeModal(evt, popupTypeEdit, true);\r\n      clearValidation(editForm, validationSettings);\r\n    })\r\n    .catch(handleError)\r\n    .finally(renderLoading(false, btn, \"Сохранить\"));\r\n}\r\n\r\nfunction handleEditAvatarFormSubmit(evt) {\r\n  evt.preventDefault();\r\n  const btn = avatarForm.querySelector(\".popup__button\");\r\n\r\n  renderLoading(true, btn, \"Сохраняю...\");\r\n\r\n  crudAPI\r\n    .patchAvatar(avatarInput.value)\r\n    .then((profileData) => {\r\n      profileImage.style.backgroundImage = `url('${profileData.avatar}')`;\r\n      closeModal(evt, popupTypeAvatar, true);\r\n      clearValidation(avatarForm, validationSettings);\r\n\r\n      avatarForm.reset();\r\n    })\r\n    .catch(handleError)\r\n    .finally(renderLoading(false, btn, \"Сохранить\"));\r\n}\r\n\r\naddForm.addEventListener(\"submit\", handleNewCardFormSubmit);\r\neditForm.addEventListener(\"submit\", handleEditProfileFormSubmit);\r\navatarForm.addEventListener(\"submit\", handleEditAvatarFormSubmit);\r\n\r\nfunction openImage(name, link) {\r\n  modalImage.src = link;\r\n  modalImage.alt = \"На фото \" + name;\r\n  modalCaption.textContent = name;\r\n  openModal(popupTypeImage);\r\n}\r\n\r\nfunction addEventListenerForPopup(popup) {\r\n  const popupCloseButton = popup.querySelector(\".popup__close\");\r\n\r\n  popupCloseButton.addEventListener(\"click\", (event) => {\r\n    closeModal(event, popup);\r\n  });\r\n\r\n  popup.addEventListener(\"click\", (event) => {\r\n    closeModal(event, popup);\r\n  });\r\n}\r\n\r\ndocument\r\n  .querySelectorAll(\".popup\")\r\n  .forEach((popup) => addEventListenerForPopup(popup));\r\n\r\nfunction updateProfile(profileData) {\r\n  profileId = profileData._id;\r\n  title.textContent = profileData.name;\r\n  description.textContent = profileData.about;\r\n  profileImage.style.backgroundImage = `url('${profileData.avatar}')`;\r\n}\r\n\r\nenableValidation(validationSettings);\r\n\r\nPromise.all([crudAPI.getProfile(), crudAPI.getCards()])\r\n  .then(([profile, cards]) => {\r\n    updateProfile(profile);\r\n\r\n    cards.forEach((card) => {\r\n      const newCard = createCard(card, clickFunctions, crudAPI, profileId);\r\n      placesList.append(newCard);\r\n    });\r\n  })\r\n  .catch(handleError);\r\n\r\nfunction renderLoading(isLoading, btn, btnText) {\r\n  btn.textContent = btnText;\r\n  if (isLoading) {\r\n    spinner.classList.add(\"spinner_visible\");\r\n  } else {\r\n    spinner.classList.remove(\"spinner_visible\");\r\n  }\r\n}\r\n"],"names":["openModal","popup","classList","add","openPopup","document","addEventListener","closeModal","event","close","arguments","length","undefined","key","querySelector","popupCloseButton","target","closest","remove","closePopup","removeEventListener","cardTemplate","content","createCard","cardData","clickFunctions","cardAPI","profileId","cardElement","cloneNode","trashCallback","deleteCardAPI","deleteBtn","owner","_id","adjustDeleteAction","trash","deleteCard","onClickCallback","cardImage","setAttribute","link","name","textContent","adjustCardImage","card","callbackOnLike","saveLikeCard","likeElement","likeBtn","likes","forEach","like","toggle","adjustLikeAction","likeCard","validationSettings","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","hideInputError","formElement","inputElement","errorElement","concat","id","clearValidation","Array","from","querySelectorAll","PATH","headers","authorization","handleResponse","response","ok","json","Promise","reject","status","crudAPI","getProfile","fetch","method","then","patchProfile","about","settings","body","JSON","stringify","patchAvatar","avatar","getCards","addCard","postCard","cardId","liked","checkUrl","url","correctUrl","catch","placesList","editForm","addForm","avatarForm","title","description","profileImage","nameInput","jobInput","editButton","addButton","avatarButton","cardNameInput","urlInput","avatarInput","popupTypeNew","popupTypeEdit","popupTypeImage","popupTypeAvatar","modalImage","modalCaption","spinner","handleError","err","console","log","parentElement","removeChild","contains","result","src","alt","updateProfile","profileData","style","backgroundImage","renderLoading","isLoading","btn","btnText","value","evt","preventDefault","newCard","prepend","reset","finally","addEventListenerForPopup","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","showInputError","validationMessage","isValid","setEventListeners","enableValidation","all","_ref","_ref2","profile","cards","append"],"sourceRoot":""}