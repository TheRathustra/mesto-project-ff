{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex_praktikum/./src/scripts/components/modal.js","webpack://yandex_praktikum/./src/scripts/components/cards.js","webpack://yandex_praktikum/./src/scripts/components/initialData.js","webpack://yandex_praktikum/./src/scripts/components/validation.js","webpack://yandex_praktikum/./src/scripts/components/api.js","webpack://yandex_praktikum/./src/scripts/index.js"],"sourcesContent":["function openModal(popup) {\r\n  openPopup(popup);\r\n  //Повесим на весь документ для нажатия клавиши Esc\r\n  document.addEventListener(\"keydown\", closeModal);\r\n}\r\n\r\nfunction closeModal(event, popup, close = false) {\r\n  if (!popup && event.key === \"Escape\") {\r\n    popup = document.querySelector(\".popup_is-opened\");\r\n  }\r\n\r\n  if (!popup) {\r\n    return;\r\n  }\r\n\r\n  const popupCloseButton = popup.querySelector(\".popup__close\");\r\n  if (\r\n    event.key === \"Escape\" ||\r\n    event.target === popupCloseButton ||\r\n    !event.target.closest(\".popup__content\") ||\r\n    close\r\n  ) {\r\n    closePopup(popup);\r\n  }\r\n\r\n  document.removeEventListener(\"keydown\", closeModal);\r\n}\r\n\r\nfunction openPopup(popup) {\r\n  popup.classList.add(\"popup_is-opened\");\r\n}\r\n\r\nfunction closePopup(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n}\r\n\r\nexport { openModal, closeModal };\r\n","const cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nfunction createCard(cardData, clickFunctions, cardAPI, profileId) {\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true);\r\n\r\n  adjustDeleteAction(cardElement, cardData, clickFunctions.trash, cardAPI.deleteCard);\r\n  adjustCardImage(cardElement, cardData, clickFunctions.card);\r\n  adjustLikeAction(\r\n    cardElement,\r\n    cardData,\r\n    clickFunctions.like,\r\n    cardAPI.likeCard,\r\n    profileId\r\n  );\r\n\r\n  return cardElement;\r\n}\r\n\r\nfunction adjustDeleteAction(cardElement, cardData, trashCallback, deleteCardAPI) {\r\n  const deleteBtn = cardElement.querySelector(\".card__delete-button\");\r\n  if (trashCallback !== null) {\r\n    deleteBtn.addEventListener(\"click\", (event) => {\r\n      trashCallback(event, cardData, deleteCardAPI);\r\n    });\r\n  } else {\r\n    deleteBtn.classList.add(\"card__delete-button_hidden\");\r\n  }\r\n}\r\n\r\nfunction adjustCardImage(cardElement, cardData, onClickCallback) {\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  cardImage.setAttribute(\"src\", cardData.link);\r\n  cardImage.setAttribute(\"alt\", cardData.name);\r\n  cardElement.querySelector(\".card__title\").textContent = cardData.name;\r\n\r\n  cardImage.addEventListener(\"click\", () => {\r\n    onClickCallback(cardData.name, cardData.link);\r\n  });\r\n}\r\n\r\nfunction adjustLikeAction(\r\n  cardElement,\r\n  cardData,\r\n  callbackOnLike,\r\n  saveLikeCard,\r\n  profileId\r\n) {\r\n  const likeElement = cardElement.querySelector(\".card__like\");\r\n\r\n  const likeBtn = likeElement.querySelector(\".card__like-button\");\r\n  likeBtn.addEventListener(\"click\", (event) => {\r\n    callbackOnLike(event, cardData, saveLikeCard);\r\n  });\r\n\r\n  const likeNumber = likeElement.querySelector(\".card__like-number\");\r\n  likeNumber.textContent = cardData.likes.length;\r\n\r\n  cardData.likes.forEach((like) => {\r\n    if (profileId === like._id) {\r\n      likeBtn.classList.toggle(\"card__like-button_is-active\");\r\n    }\r\n  });\r\n}\r\n\r\nfunction deleteCard(event, cardData, deleteCardAPI) {\r\n  deleteCardAPI(cardData._id);\r\n  let card = event.target.closest(\".card\");\r\n  card.parentElement.removeChild(card);\r\n}\r\n\r\nfunction сlickOnLike(event, card, saveLikeCard) {\r\n  event.target.classList.toggle(\"card__like-button_is-active\");\r\n  let likeElement = event.target.closest(\".card__like\");\r\n  const likeNumber = likeElement.querySelector(\".card__like-number\");\r\n  saveLikeCard(\r\n    card._id,\r\n    event.target.classList.contains(\"card__like-button_is-active\")\r\n  )\r\n    .then((result) => (likeNumber.textContent = result.likes.length))\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nexport { createCard, deleteCard, сlickOnLike };\r\n","export const initialCards = [\r\n  {\r\n    name: \"Архыз\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg\",\r\n  },\r\n  {\r\n    name: \"Челябинская область\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg\",\r\n  },\r\n  {\r\n    name: \"Иваново\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg\",\r\n  },\r\n  {\r\n    name: \"Камчатка\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg\",\r\n  },\r\n  {\r\n    name: \"Холмогорский район\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg\",\r\n  },\r\n  {\r\n    name: \"Байкал\",\r\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg\",\r\n  }\r\n];\r\n\r\nexport const validationSettings = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};","function showInputError(\r\n  formElement,\r\n  inputElement,\r\n  errorMessage,\r\n  validationSettings\r\n) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n\r\n  inputElement.classList.add(validationSettings.inputErrorClass);\r\n  errorElement.classList.add(validationSettings.errorClass);\r\n  errorElement.textContent = errorMessage;\r\n\r\n  const btn = formElement.querySelector(\r\n    validationSettings.submitButtonSelector\r\n  );\r\n  btn.classList.add(validationSettings.inactiveButtonClass);\r\n}\r\n\r\nfunction hideInputError(formElement, inputElement, validationSettings) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n\r\n  inputElement.classList.remove(validationSettings.inputErrorClass);\r\n  errorElement.classList.remove(validationSettings.errorClass);\r\n  errorElement.textContent = \"\";\r\n\r\n  const btn = formElement.querySelector(\r\n    validationSettings.submitButtonSelector\r\n  );\r\n  btn.classList.remove(validationSettings.inactiveButtonClass);\r\n}\r\n\r\nfunction isValid(formElement, inputElement, validationSettings) {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      validationSettings\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationSettings);\r\n  }\r\n}\r\n\r\nfunction setEventListeners(formElement, validationSettings) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationSettings.inputSelector)\r\n  );\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      isValid(formElement, inputElement, validationSettings);\r\n    });\r\n  });\r\n}\r\n\r\nfunction enableValidation(validationSettings) {\r\n  const formList = Array.from(\r\n    document.querySelectorAll(validationSettings.formSelector)\r\n  );\r\n\r\n  formList.forEach((formElement) => {\r\n    clearValidation(formElement, validationSettings);\r\n    setEventListeners(formElement, validationSettings);\r\n  });\r\n}\r\n\r\nfunction clearValidation(formElement, validationSettings) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationSettings.inputSelector)\r\n  );\r\n\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, validationSettings);\r\n  });\r\n\r\n  const btn = formElement.querySelector(\r\n    validationSettings.submitButtonSelector\r\n  );\r\n  btn.classList.add(validationSettings.inactiveButtonClass);\r\n}\r\n\r\nexport { enableValidation, clearValidation };\r\n","const apiSettings = {\r\n  token: '6181dd13-c179-480c-8203-2aa7bbc59bd3',\r\n  groupdId: 'wff-cohort-18'\r\n}\r\n\r\nconst PATH = `https://nomoreparties.co/v1/${apiSettings.groupdId}/`;\r\nconst headers = ({\r\n  \"Content-Type\": \"application/json\",\r\n  authorization: `${apiSettings.token}`\r\n});\r\n\r\nconst handleResponse = (response) => {\r\n  if (response.ok) {\r\n    return response.json();\r\n  }\r\n\r\n  return Promise.reject(`Ошибка: ${response.status}`);\r\n}\r\n\r\nfunction getProfile() {\r\n  const settings = {\r\n    method: 'GET',\r\n    headers,\r\n  };\r\n  return fetch(PATH + \"users/me\", settings)\r\n    .then(handleResponse); \r\n}\r\n\r\nfunction patchProfile(name, about) {\r\n  const settings = {\r\n    method: 'PATCH',\r\n    headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about\r\n    })\r\n  };\r\n  return fetch(PATH + \"users/me\", settings)\r\n    .then(handleResponse);  \r\n}\r\n\r\nfunction patchAvatar(avatar) {\r\n  const settings = {\r\n    method: 'PATCH',\r\n    headers,\r\n    body: JSON.stringify({\r\n      avatar: avatar\r\n    })\r\n  };\r\n  return fetch(PATH + \"users/me/avatar\", settings)\r\n    .then(handleResponse);  \r\n}\r\n\r\nfunction getCards() {\r\n  const settings = {\r\n    method: 'GET',\r\n    headers,\r\n  };\r\n  return fetch(PATH + \"cards\", settings)\r\n    .then(handleResponse); \r\n}\r\n\r\nfunction postCard(name, link) {\r\n  const settings = {\r\n    method: 'POST',\r\n    headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link\r\n    })\r\n  };\r\n  return fetch(PATH + \"cards\", settings)\r\n    .then(handleResponse); \r\n}\r\n\r\nfunction likeCard(cardId, liked) {\r\n  const settings = {\r\n    method: liked ? 'PUT' : 'DELETE',\r\n    headers\r\n  };\r\n  return fetch(PATH + `cards/likes/${cardId}`, settings)\r\n    .then(handleResponse); \r\n}\r\n\r\nfunction deleteCard(cardId) {\r\n  const settings = {\r\n    method: 'DELETE',\r\n    headers\r\n  };\r\n  return fetch(PATH + `cards/${cardId}`, settings)\r\n    .then(handleResponse); \r\n}\r\n\r\nfunction checkUrl(url) {\r\n  const settings = {\r\n    method: 'HEAD'\r\n  };\r\n  let correctUrl = false;\r\n  fetch(url, settings).then((response) => {\r\n    correctUrl = response.ok;\r\n  }).catch(() => correctUrl = false);\r\n  return correctUrl; \r\n}\r\n\r\nconst makeCrudAPI = () => ({\r\n  getProfile: () => getProfile(),\r\n  patchProfile: (name, about) => patchProfile(name, about),\r\n  patchAvatar: (avatar) => patchAvatar(avatar),\r\n  getCards: () => getCards(),\r\n  addCard: (name, link) => postCard(name, link),\r\n  deleteCard: (cardId) => deleteCard(cardId),\r\n  likeCard: (cardId, liked) => likeCard(cardId, liked),\r\n  checkUrl: (url) => checkUrl(url),\r\n});\r\n\r\nexport const crudAPI = makeCrudAPI(); \r\n","import \"../pages/index.css\";\r\nimport { openModal, closeModal } from \"./components/modal.js\";\r\nimport { createCard, deleteCard, сlickOnLike } from \"./components/cards.js\";\r\nimport { initialCards, validationSettings } from \"./components/initialData.js\";\r\nimport { clearValidation, enableValidation } from \"./components/validation.js\";\r\nimport { crudAPI } from \"./components/api.js\";\r\n\r\nconst placesList = document.querySelector(\".places__list\");\r\nconst content = document.querySelector(\".content\");\r\n\r\nconst editForm = document.querySelector(\".popup_type_edit .popup__form\");\r\nconst addForm = document.querySelector(\".popup_type_new-card  .popup__form\");\r\nconst avatarForm = document.querySelector(\".popup_type_avatar  .popup__form\");\r\n\r\nconst title = content.querySelector(\".profile__title\");\r\nconst description = content.querySelector(\".profile__description\");\r\nconst profileImage = content.querySelector(\".profile__image\");\r\n\r\nconst nameInput = document.querySelector(\".popup__input_type_name\");\r\nconst jobInput = document.querySelector(\".popup__input_type_description\");\r\nconst editButton = document.querySelector(\".profile__edit-button\");\r\nconst addButton = document.querySelector(\".profile__add-button\");\r\nconst avatarButton = document.querySelector(\".profile__avatar-button\");\r\n\r\nconst cardNameInput = document.querySelector(\".popup__input_type_card-name\");\r\nconst urlInput = document.querySelector(\".popup__input_type_url\");\r\nconst avatarInput = document.querySelector(\".popup__input_type_avatar\");\r\n\r\nconst popupTypeNew = document.querySelector(\".popup_type_new-card\");\r\nconst popupTypeEdit = document.querySelector(\".popup_type_edit\");\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupTypeAvatar = document.querySelector(\".popup_type_avatar\");\r\n\r\nconst modalImage = document.querySelector(\".popup__image\");\r\nconst modalCaption = document.querySelector(\".popup__caption\");\r\n\r\nconst spinner = document.querySelector(\".spinner\");\r\n\r\nconst handleError = (err) => {\r\n  console.log(err);\r\n};\r\n\r\nconst clickFunctions = {\r\n  trash: deleteCard,\r\n  like: сlickOnLike,\r\n  card: openImage,\r\n};\r\n\r\nlet profileId = undefined;\r\n\r\naddButton.addEventListener(\"click\", () => {\r\n  openModal(popupTypeNew);\r\n});\r\n\r\neditButton.addEventListener(\"click\", () => {\r\n  nameInput.value = title.textContent;\r\n  jobInput.value = description.textContent;\r\n  openModal(popupTypeEdit);\r\n});\r\n\r\navatarButton.addEventListener(\"click\", () => {\r\n  openModal(popupTypeAvatar);\r\n});\r\n\r\nfunction handleNewCardFormSubmit(evt) {\r\n  evt.preventDefault();\r\n  renderLoading(true, addForm);\r\n\r\n  clickFunctions.trash = deleteCard;\r\n\r\n  crudAPI\r\n    .addCard(cardNameInput.value, urlInput.value)\r\n    .then((card) => {\r\n      const newCard = createCard(card, clickFunctions, crudAPI, profileId);\r\n      closeModal(evt, popupTypeNew, true);\r\n      placesList.prepend(newCard);\r\n    })\r\n    .catch(handleError)\r\n    .finally(renderLoading(false, addForm));\r\n\r\n  addForm.reset();\r\n  clearValidation(addForm, validationSettings);\r\n}\r\n\r\nfunction handleEditProfileFormSubmit(evt) {\r\n  evt.preventDefault();\r\n  renderLoading(true, editForm);\r\n\r\n  crudAPI\r\n    .patchProfile(nameInput.value, jobInput.value)\r\n    .then((profileData) => {\r\n      updateProfile(profileData);\r\n    })\r\n    .catch(handleError)\r\n    .finally(renderLoading(false, editForm));\r\n\r\n  closeModal(evt, popupTypeEdit, true);\r\n  clearValidation(editForm, validationSettings);\r\n}\r\n\r\nfunction handleEditAvatarFormSubmit(evt) {\r\n  evt.preventDefault();\r\n  renderLoading(true, avatarForm);\r\n\r\n  crudAPI\r\n    .patchAvatar(avatarInput.value)\r\n    .then((profileData) => {\r\n      profileImage.style.backgroundImage = `url('${profileData.avatar}')`;\r\n    })\r\n    .catch(handleError)\r\n    .finally(renderLoading(false, avatarForm));\r\n\r\n  closeModal(evt, popupTypeAvatar, true);\r\n  clearValidation(avatarForm, validationSettings);\r\n\r\n  avatarForm.reset();\r\n}\r\n\r\naddForm.addEventListener(\"submit\", handleNewCardFormSubmit);\r\neditForm.addEventListener(\"submit\", handleEditProfileFormSubmit);\r\navatarForm.addEventListener(\"submit\", handleEditAvatarFormSubmit);\r\n\r\nfunction openImage(name, link) {\r\n  modalImage.src = link;\r\n  modalImage.alt = \"На фото \" + name;\r\n  modalCaption.textContent = name;\r\n  openModal(popupTypeImage);\r\n}\r\n\r\nfunction addEventListenerForPopup(popup) {\r\n  const popupCloseButton = popup.querySelector(\".popup__close\");\r\n  const currentForm = popup.closest('.popup__form');\r\n\r\n  popupCloseButton.addEventListener(\"click\", (event) => {\r\n    closeModal(event, popup);\r\n    if (currentForm !== null) {\r\n      clearValidation(currentForm, validationSettings);\r\n    }\r\n  });\r\n\r\n  popup.addEventListener(\"click\", (event) => {\r\n    closeModal(event, popup);\r\n    if (currentForm !== null) {\r\n      clearValidation(currentForm, validationSettings);\r\n    }\r\n  });\r\n}\r\n\r\ndocument\r\n  .querySelectorAll(\".popup\")\r\n  .forEach((popup) => addEventListenerForPopup(popup));\r\n\r\nfunction updateProfile(profileData) {\r\n  profileId = profileData._id;\r\n  title.textContent = profileData.name;\r\n  description.textContent = profileData.about;\r\n  profileImage.style.backgroundImage = `url('${profileData.avatar}')`;\r\n}\r\n\r\nenableValidation(validationSettings);\r\n\r\nPromise.all([crudAPI.getProfile(), crudAPI.getCards()])\r\n  .then(([profile, cards]) => {\r\n    updateProfile(profile);\r\n\r\n    cards.forEach((card) => {\r\n      clickFunctions.trash = profileId === card._id ? deleteCard : null;\r\n      const newCard = createCard(card, clickFunctions, crudAPI, profileId);\r\n      placesList.append(newCard);\r\n    });\r\n  })\r\n  .catch(handleError);\r\n\r\nfunction renderLoading(isLoading, currentForm) {\r\n  const btn = currentForm.querySelector(\".popup__button\");\r\n  btn.textContent = isLoading ? \"Сохраняю...\" : \"Сохранить\";\r\n  if (isLoading) {\r\n    spinner.classList.add(\"spinner_visible\");\r\n  } else {\r\n    spinner.classList.remove(\"spinner_visible\");\r\n  }\r\n}\r\n"],"names":["openModal","popup","classList","add","openPopup","document","addEventListener","closeModal","event","close","arguments","length","undefined","key","querySelector","popupCloseButton","target","closest","remove","closePopup","removeEventListener","cardTemplate","content","createCard","cardData","clickFunctions","cardAPI","profileId","cardElement","cloneNode","trashCallback","deleteCardAPI","deleteBtn","adjustDeleteAction","trash","deleteCard","onClickCallback","cardImage","setAttribute","link","name","textContent","adjustCardImage","card","callbackOnLike","saveLikeCard","likeElement","likeBtn","likes","forEach","like","_id","toggle","adjustLikeAction","likeCard","parentElement","removeChild","validationSettings","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","hideInputError","formElement","inputElement","errorElement","concat","id","clearValidation","Array","from","querySelectorAll","PATH","headers","authorization","handleResponse","response","ok","json","Promise","reject","status","crudAPI","getProfile","fetch","method","then","patchProfile","about","settings","body","JSON","stringify","patchAvatar","avatar","getCards","addCard","postCard","cardId","liked","checkUrl","url","correctUrl","catch","placesList","editForm","addForm","avatarForm","title","description","profileImage","nameInput","jobInput","editButton","addButton","avatarButton","cardNameInput","urlInput","avatarInput","popupTypeNew","popupTypeEdit","popupTypeImage","popupTypeAvatar","modalImage","modalCaption","spinner","handleError","err","console","log","likeNumber","contains","result","src","alt","updateProfile","profileData","style","backgroundImage","renderLoading","isLoading","currentForm","value","evt","preventDefault","newCard","prepend","finally","reset","addEventListenerForPopup","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","showInputError","validationMessage","isValid","setEventListeners","enableValidation","all","_ref","_ref2","profile","cards","append"],"sourceRoot":""}